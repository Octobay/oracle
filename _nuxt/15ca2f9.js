(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{408:function(t,e){},417:function(t,e){},435:function(t,e){},437:function(t,e){},455:function(t,e){},458:function(t,e){},511:function(t,e){},513:function(t,e){},522:function(t,e){},524:function(t,e){},549:function(t,e){},551:function(t,e){},552:function(t,e){},557:function(t,e){},559:function(t,e){},572:function(t,e){},584:function(t,e){},587:function(t,e){},592:function(t,e){},603:function(t,e){},606:function(t,e){},658:function(t){t.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"ethPrice","type":"uint256"}],"name":"ETHPriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"ethPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"oracle","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ethPrice","type":"uint256"}],"name":"setEthPrice","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},662:function(t,e,n){"use strict";n.r(e);n(60),n(59);var c=n(396),r=n.n(c),o=n(658),l={data:function(){return{ethPrice:0,web3:null,contractAddress:"0xcb2b1061748d07c913048a498fcd72c3fc0f527d",contract:null,oracle:"0xA56d9e73f98212e56A2eFb00c9F47d1da64937ee",updated:!1,accounts:[],githubUser:null,githubAccessToken:null,requestIssue:null,requestFulfilled:!1}},mounted:function(){var t=this;if(window.ethereum){this.web3=new r.a(window.ethereum),this.contract=new this.web3.eth.Contract(o,this.contractAddress),this.getEthPrice(),this.connect(),this.contract.events.ETHPriceUpdated((function(){t.getEthPrice(),t.requestFulfilled=!0}));var code=this.$route.query.code;code&&this.$axios.$post("https://octobay.uber.space/oracle-demo/github/access-token",{code:code}).then((function(e){t.$axios.$get("https://api.github.com/user",{headers:{Authorization:"bearer "+e.accessToken}}).then((function(n){t.githubUser=n,t.githubAccessToken=e.accessToken}))}))}else alert("You need an Ethereum compatible browser to try this demo.")},methods:{connect:function(){var t=this;this.web3.eth.requestAccounts().then((function(e){return t.accounts=e}))},getEthPrice:function(){var t=this;this.contract.methods.ethPrice().call().then((function(e){t.ethPrice=e,t.updated=!0,setTimeout((function(){return t.updated=!1}),3e3)}))},updateEthPrice:function(){var t=this;this.web3.eth.sendTransaction({from:this.accounts[0],to:this.oracle,value:this.web3.utils.toWei("0.001","ether")}).then((function(e){t.$axios.$post("https://api.github.com/repos/octobay/oracle/issues",{title:"[ETHUSD]",body:"".concat(e.transactionHash,":").concat(t.contractAddress,":setEthPrice(uint256)")},{headers:{Authorization:"bearer "+t.githubAccessToken}}).then((function(e){t.requestIssue=e}))}))}}},d=n(47),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mt-5 text-center",staticStyle:{"max-width":"360px"}},[n("h1",[t._v("Octobay Oracle Demo")]),t._v(" "),n("div",{staticClass:"alert alert-info mx-auto mt-4 mb-5"},[t._v("\n    Make sure you are connected to the Kovan test network in your MetaMask\n    wallet and connect to your GitHub account. You can then pay the oracle\n    (0.001 ETH) to update the ETH price on the\n    "),n("a",{attrs:{href:"https://kovan.etherscan.io/address/"+t.contractAddress,target:"_blank"}},[t._v("\n      example contract ")]),t._v(".\n  ")]),t._v(" "),t.githubUser?n("p",{staticClass:"lead"},[t._v("Hi "+t._s(t.githubUser.login)+"!")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.getEthPrice}},[t._v("Get ETH Price")]),t._v(" "),t.githubUser?n("button",{staticClass:"btn btn-primary",on:{click:t.updateEthPrice}},[t._v("\n    Update ETH Price\n  ")]):n("a",{staticClass:"btn btn-primary",attrs:{href:"https://github.com/login/oauth/authorize?scope=user:email,public_repo&client_id=376c59cbd5e3b4d3c9a6"}},[t._v("\n    Connect to GitHub\n  ")]),t._v(" "),t.requestIssue?n("div",{staticClass:"alert alert-info mt-3"},[t._v("\n    Oracle request has been made:\n    "),n("a",{attrs:{href:t.requestIssue.html_url,target:"_blank"}},[t._v("Watch Job Run")])]):t._e(),t._v(" "),t.requestFulfilled?n("div",{staticClass:"alert alert-success mt-3"},[t._v("\n    Request fulfilled!\n  ")]):t._e(),t._v(" "),n("h5",{staticClass:"mt-3"},[t._v("Current ETH price:")]),t._v(" "),n("h3",[t._v("$"+t._s((Number(t.ethPrice)/1e8).toFixed(2)))]),t._v(" "),t.updated?n("div",{staticClass:"text-success"},[t._v("Updated!")]):t._e()])}),[],!1,null,null,null);e.default=component.exports}}]);